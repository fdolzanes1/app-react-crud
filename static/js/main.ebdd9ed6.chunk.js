(this["webpackJsonpapp-react-crud"]=this["webpackJsonpapp-react-crud"]||[]).push([[0],{34:function(e,t,a){e.exports=a(57)},45:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=(a(39),a(8)),s=a(9),i=a(11),u=a(10),m=a(12),h=a(66),d=a(67),f=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{bg:"dark",variant:"dark",className:"fixed-top"},r.a.createElement(h.a.Brand,{href:"#"},"Contacts"),r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement(d.a.Link,{href:"#"},"React + NodeJS")))}}]),t}(n.Component),p=a(24),g=a.n(p),b=a(60),E=a(61),v=a(62),C=a(63),j=a(64),O=a(65),y=a(68),k=(a(45),a(32)),N=a.n(k),S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={model:{nome:"",email:"",telefone:""}},a.setValues=function(e,t){var n=a.state.model;n[t]=e.target.value,a.setState({model:n})},a.create=function(){a.setState({model:{nome:"",email:"",telefone:""}}),a.props.contactCreate(a.state.model)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;g.a.subscribe("edit-contact",(function(t,a){e.setState({model:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a,{for:"nome"},"Nome"),r.a.createElement(C.a,{id:"nome",value:this.state.model.nome,type:"text",placeholder:"Digite o seu Nome",onChange:function(t){return e.setValues(t,"nome")}})),r.a.createElement(E.a,null,r.a.createElement(v.a,{for:"email"},"Email"),r.a.createElement(C.a,{id:"email",value:this.state.model.email,type:"text",placeholder:"Digite o seu Email",onChange:function(t){return e.setValues(t,"email")}})),r.a.createElement(E.a,null,r.a.createElement(v.a,{for:"telefone"},"Telefone"),r.a.createElement(C.a,{id:"telefone",value:this.state.model.telefone,type:"text",placeholder:"Digite o seu Telefone",onChange:function(t){return e.setValues(t,"telefone")}})),r.a.createElement(E.a,null,r.a.createElement(j.a,{onClick:this.create,color:"primary"},"Salvar Contato")))}}]),t}(n.Component),x=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.props.updateSearch(e.target.value)}},{key:"render",value:function(){return r.a.createElement(C.a,{type:"text",placeholder:"Find a Contact",className:"input-search",onChange:this.handleChange.bind(this),value:this.props.searchText})}}]),t}(n.Component),P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).delete=function(e){a.props.deleteContact(e)},a.onEdit=function(e){g.a.publish("edit-contact",e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"filter",value:function(e){var t=this;return this.props.filter?e.filter((function(e){return e.nome.toString().toLowerCase().indexOf(t.props.filter.toLowerCase())>=0})):e}},{key:"render",value:function(){var e=this,t=this.props.contacts;return r.a.createElement(O.a,{responsive:!0},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Telefone"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.filter(t).map((function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,t.nome),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.telefone),r.a.createElement("td",null,r.a.createElement(j.a,{color:"info",size:"sm",onClick:function(a){return e.onEdit(t)}},"Editar"),r.a.createElement(j.a,{color:"danger",size:"sm",onClick:function(a){return e.delete(t._id)}},"Excluir")))}))))}}]),t}(n.Component),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).url="https://nameless-badlands-32634.herokuapp.com/api/contacts",a.state={contacts:[],message:{text:"",alert:""},currentPageNumber:1,totalPages:1,totalItems:1,limit:10,filter:null},a.save=function(e){var t={_id:e._id,nome:e.nome,email:e.email,telefone:e.telefone},n={method:null!=t._id?"PUT":"POST",body:JSON.stringify(t),headers:new Headers({"Content-type":"application/json"})};null==t._id?fetch(a.url,n).then((function(e){return e.json()})).then((function(e){var t=a.state.contacts;t.push(e),a.setState({contacts:t,message:{text:"Novo Contado Adicionado",alert:"success"}}),a.timerMessage(3e3)})).catch((function(e){return console.log(e)})):fetch("".concat(a.url,"/").concat(t._id),n).then((function(e){return e.json()})).then((function(e){var n=a.state.contacts;n[a.state.contacts.findIndex((function(e){return e._id===t._id}))]=e,a.setState({contacts:n,message:{text:"Contato Atualizado",alert:"info"}}),a.timerMessage(3e3)})).catch((function(e){return console.log(e)}))},a.delete=function(e){fetch("".concat(a.url,"/").concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(t){var n=a.state.contacts.filter((function(t){return t._id!==e}));a.setState({contacts:n,message:{text:"Contato Deletado",alert:"danger"}}),a.timerMessage(3e3)})).catch((function(e){return console.log(e)}))},a.timerMessage=function(e){setTimeout((function(){a.setState({message:{text:"",alert:""}})}),e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getContact",value:function(e){var t=this,a=new URLSearchParams;a.append("page",e||1),console.log(this.url,this.url+"?"+a),fetch(this.url+"?"+a).then((function(e){return e.json()})).then((function(e){return t.setState({contacts:e.docs,totalPages:e.pages,currentPageNumber:e.page,totalItems:e.total,limit:e.limit})})).catch((function(e){return console.log(e)}))}},{key:"handleSelect",value:function(e){var t=e.selected+1;this.setState({currentPageNumber:e}),this.getContact(t)}},{key:"componentDidMount",value:function(){this.getContact(this.currentPageNumber)}},{key:"fetchBlogPosts",value:function(e){var t=new URLSearchParams;return t.append("page",e||1),console.log(this.url,this.url+"?"+t),fetch(this.url+"?"+t,{method:"GET",mode:"CORS"}).then((function(e){return e.json()})).catch((function(e){return e}))}},{key:"updateSearch",value:function(e){this.state.filter;this.setState({filter:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"contact-box"},""!==this.state.message.text?r.a.createElement(y.a,{color:this.state.message.alert,className:"text-center"}," ",this.state.message.text," "):"",r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h2",null,"Cadastro de Contato"),r.a.createElement(S,{contactCreate:this.save})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h2",null,"Listar de Contato"),r.a.createElement(x,{updateSearch:this.updateSearch.bind(this),searchText:this.state.filter}),r.a.createElement(P,{contacts:this.state.contacts,deleteContact:this.delete,filter:this.state.filter}),r.a.createElement(N.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:this.state.totalPages,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.handleSelect.bind(this),containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",activeLinkClassName:"active"}))))}}]),t}(n.Component),L=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{bg:"dark",variant:"dark",className:"fixed-bottom"},r.a.createElement(h.a.Brand,null,"Fabiano Dolzanes"))}}]),t}(n.Component),T=(a(56),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(f,null),r.a.createElement(w,null),r.a.createElement(L,null))}}]),t}(n.Component));l.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.ebdd9ed6.chunk.js.map